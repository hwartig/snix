<!DOCTYPE html>  <html> <head>   <title>snix.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               snix.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="s2">&quot;use strict&quot;</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p><strong>Snix</strong> is JavaScript library that helps you to create ambitious web applications. It is built around the "Reactive programming" paradigm and is heavily influenced by frameworks like Backbone, Knockout and Ember.</p>

<h3>Features</h3>

<ul>
<li><strong>Declarative bindings</strong> - easily connect your UI with your data model</li>
<li><strong>Dependency tracking</strong> - automatically propagate changes in your data model and updates relevant parts in your UI</li>
</ul>

<h3>Modules</h3>

<ul>
<li><strong>Types</strong> - commonly used data types (int, float, array, etc.)</li>
<li><strong>Bindings</strong> - bunch of ready to use UI-bindings</li>
<li><strong>Binding API</strong> - simply create your own UI-bindings</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">var</span> <span class="nx">Snix</span> <span class="o">=</span> <span class="p">{};</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <h3>Integration</h3>

<p>Snix uses JQuery, Underscore and Moment internally.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">jQuery</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">oldClean</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cleanData</span><span class="p">;</span>

    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cleanData</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">elems</span><span class="p">){</span>
      <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nx">elem</span><span class="p">;</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">=</span> <span class="nx">elems</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">){</span>
        <span class="nx">jQuery</span><span class="p">(</span><span class="nx">elem</span><span class="p">).</span><span class="nx">triggerHandler</span><span class="p">(</span><span class="s2">&quot;destroyed&quot;</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="nx">oldClean</span><span class="p">(</span><span class="nx">elems</span><span class="p">);</span>
    <span class="p">};</span>  
  <span class="p">}</span>
<span class="p">})();</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <hr />

<h2>Snix.Util</h2>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">Snix</span><span class="p">.</span><span class="nx">call</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fun</span><span class="p">,</span> <span class="nx">caller</span><span class="p">,</span> <span class="nx">context</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">prevCaller</span> <span class="o">=</span> <span class="nx">Snix</span><span class="p">.</span><span class="nx">__caller__</span><span class="p">;</span>
  <span class="nx">Snix</span><span class="p">.</span><span class="nx">__caller__</span> <span class="o">=</span> <span class="nx">caller</span><span class="p">;</span>
  <span class="nx">fun</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">context</span><span class="p">);</span>
  <span class="nx">Snix</span><span class="p">.</span><span class="nx">__caller__</span> <span class="o">=</span> <span class="nx">prevCaller</span><span class="p">;</span>
<span class="p">};</span>
<span class="nx">Snix</span><span class="p">.</span><span class="nx">__caller__</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

<span class="nx">Snix</span><span class="p">.</span><span class="nx">unwrap</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">any</span><span class="p">){</span>
  <span class="k">return</span> <span class="nx">any</span> <span class="o">&amp;&amp;</span> <span class="nx">any</span><span class="p">.</span><span class="nx">__snix__</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">unwrap</span><span class="p">(</span><span class="nx">any</span><span class="p">())</span> <span class="o">:</span> <span class="nx">any</span><span class="p">;</span>
<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <hr />

<h2>Snix.Value</h2>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">Snix</span><span class="p">.</span><span class="nx">Value</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">valueProvider</span><span class="p">){</span>

  <span class="k">if</span><span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">valueProvider</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span>
    <span class="k">throw</span> <span class="s2">&quot;missing valueProvider&quot;</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>Each snix value has a unique id</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">uniqueId</span><span class="p">();</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>Values which have this value as dependency</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">dependants</span> <span class="o">=</span> <span class="p">[];</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>Values which this value depend on</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">dependencies</span> <span class="o">=</span> <span class="p">[];</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>Has a value assigned to this</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">isValueAssigned</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>The underlying value this value object represents</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>A primitive value or function to provide a value for this</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">valueProvider</span> <span class="o">=</span> <span class="nx">valueProvider</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>Stops any dependency tracking, propagation of state and release resources.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">dispose</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">release</span><span class="p">){</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>This value does not any longer depend on any value.
Give GC a chance to clean up this value.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">dependencies</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">dependencies</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">dependants</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">without</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">dependencies</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">dependants</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">dependencies</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">release</span><span class="p">){</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>This value is not used by application code any more</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">this</span><span class="p">.</span><span class="nx">dependants</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">dependencies</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">isValueAssigned</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">valueProvider</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">get</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span> <span class="k">throw</span> <span class="s2">&quot;disposed&quot;</span><span class="p">;</span> <span class="p">};</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">set</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span> <span class="k">throw</span> <span class="s2">&quot;disposed&quot;</span><span class="p">;</span> <span class="p">};</span>
    <span class="p">}</span>
  <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>All values which depend on this value will be recomputed.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">triggerDependants</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">modifiedArr</span> <span class="o">=</span> <span class="p">[</span><span class="k">this</span><span class="p">];</span>
    <span class="kd">var</span> <span class="nx">modified</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>Loop while modified values exist</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">while</span><span class="p">(</span><span class="nx">modified</span> <span class="o">=</span> <span class="nx">modifiedArr</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]){</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>Loop for any dependant in same order as they has been added</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">modified</span><span class="p">.</span><span class="nx">dependants</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>
        <span class="kd">var</span> <span class="nx">dep</span> <span class="o">=</span> <span class="nx">modified</span><span class="p">.</span><span class="nx">dependants</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>The <strong>caller</strong> depends on this - prevent "Too much recursion" errors</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span><span class="p">(</span><span class="nx">dep</span> <span class="o">==</span> <span class="nx">Snix</span><span class="p">.</span><span class="nx">__caller__</span><span class="p">)</span>
          <span class="k">continue</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">vp</span> <span class="o">=</span> <span class="nx">dep</span><span class="p">.</span><span class="nx">valueProvider</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>Get a new value of the dependant value</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">newValue</span> <span class="o">=</span> <span class="nx">vp</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">newValue</span> <span class="o">!==</span> <span class="nx">dep</span><span class="p">.</span><span class="nx">value</span><span class="p">){</span></pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p>Update the dependants value property if the new value is not equal to the existing one</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="nx">dep</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">newValue</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p>The dependants value has changed. Add it to the list of modified values, to let the dependants of the dependant recompute as well.</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="nx">modifiedArr</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">dep</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <p>Specific types (e.g. int, float, etc.) can override this method to convert the passed value as needed</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">convert</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span>
    <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
  <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <p>Sets the passed new value as underlying value</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">set</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">newValue</span><span class="p">){</span></pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <p>Give types a chance to convert the passed value</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">newValue</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">convert</span><span class="p">(</span><span class="nx">newValue</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <p>Ignore new values which are equal to the existing one</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">value</span> <span class="o">!==</span> <span class="nx">newValue</span><span class="p">){</span></pre></div>             </td>           </tr>                               <tr id="section-26">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-26">&#182;</a>               </div>               <p>Update the underlying value property</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">this</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">newValue</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-27">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-27">&#182;</a>               </div>               <p>A value has been assigned</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">this</span><span class="p">.</span><span class="nx">isValueAssigned</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-28">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-28">&#182;</a>               </div>               <p>Trigger all values which depends on this value</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">this</span><span class="p">.</span><span class="nx">triggerDependants</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-29">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-29">&#182;</a>               </div>               <p>Returns valueProvider as value if it is not a function, otherwise invoke valueProvider and return the result as value</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">provideValue</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">return</span> <span class="k">typeof</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">valueProvider</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;function&quot;</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">valueProvider</span><span class="p">()</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">valueProvider</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">trackCaller</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span></pre></div>             </td>           </tr>                               <tr id="section-30">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-30">&#182;</a>               </div>               <p>Does any <strong>caller</strong> exist ?</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="nx">Snix</span><span class="p">.</span><span class="nx">__caller__</span><span class="p">){</span></pre></div>             </td>           </tr>                               <tr id="section-31">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-31">&#182;</a>               </div>               <p><strong>caller</strong> will be added to the dependants of this unless already added.</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">_</span><span class="p">.</span><span class="nx">include</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">dependants</span><span class="p">,</span> <span class="nx">Snix</span><span class="p">.</span><span class="nx">__caller__</span><span class="p">))</span>      <span class="k">this</span><span class="p">.</span><span class="nx">dependants</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">Snix</span><span class="p">.</span><span class="nx">__caller__</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-32">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-32">&#182;</a>               </div>               <p>This will be added to the dependencies of <strong>caller</strong> unless already added</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">_</span><span class="p">.</span><span class="nx">include</span><span class="p">(</span><span class="nx">Snix</span><span class="p">.</span><span class="nx">__caller__</span><span class="p">.</span><span class="nx">dependencies</span><span class="p">,</span> <span class="k">this</span><span class="p">))</span>    <span class="nx">Snix</span><span class="p">.</span><span class="nx">__caller__</span><span class="p">.</span><span class="nx">dependencies</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-33">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-33">&#182;</a>               </div>               <p>Returns the underlying value of this</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">get</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span></pre></div>             </td>           </tr>                               <tr id="section-34">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-34">&#182;</a>               </div>               <p>Make sure any <strong>caller</strong> will be tracked </p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">trackCaller</span><span class="p">();</span>

    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">isValueAssigned</span><span class="p">){</span></pre></div>             </td>           </tr>                               <tr id="section-35">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-35">&#182;</a>               </div>               <p>This value has not been assigned any underlying value, invoke provideValue to set one.</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">this</span><span class="p">.</span><span class="nx">isValueAssigned</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">provideValue</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">fun</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>   <span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">get</span><span class="p">();</span>
      <span class="k">else</span>                        <span class="nx">self</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>

      <span class="k">return</span> <span class="nx">f</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">f</span><span class="p">.</span><span class="nx">__value__</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="nx">f</span><span class="p">.</span><span class="nx">dispose</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">dispose</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="nx">f</span><span class="p">.</span><span class="nx">__snix__</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">f</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-36">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-36">&#182;</a>               </div>               <h3>Types</h3>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">Snix</span><span class="p">.</span><span class="nx">Types</span> <span class="o">=</span> <span class="p">{};</span></pre></div>             </td>           </tr>                               <tr id="section-37">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-37">&#182;</a>               </div>               <p><strong>val</strong> - use the value as is without any convert.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">Snix</span><span class="p">.</span><span class="nx">Types</span><span class="p">.</span><span class="nx">val</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span>
  <span class="nx">value</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="nx">value</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">v</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Snix</span><span class="p">.</span><span class="nx">Value</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>

  <span class="k">return</span> <span class="nx">v</span><span class="p">.</span><span class="nx">fun</span><span class="p">();</span>
<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-38">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-38">&#182;</a>               </div>               <p><strong>boolean</strong> - converts the passed value into a boolean. true if it is true, "true" or "yes", false otherwise.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">Snix</span><span class="p">.</span><span class="nx">Types</span><span class="p">.</span><span class="kr">boolean</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">v</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Snix</span><span class="p">.</span><span class="nx">Value</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
  <span class="nx">v</span><span class="p">.</span><span class="nx">convert</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">){</span>
    <span class="k">return</span> <span class="p">(</span><span class="nx">val</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="p">(</span><span class="nx">val</span> <span class="o">==</span> <span class="kc">true</span> <span class="o">||</span> <span class="nx">val</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span> <span class="o">||</span> <span class="nx">val</span> <span class="o">==</span> <span class="s2">&quot;yes&quot;</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="nx">v</span><span class="p">.</span><span class="nx">fun</span><span class="p">();</span>
<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-39">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-39">&#182;</a>               </div>               <p><strong>int</strong> - converts the passed value into an int using parseInt.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">Snix</span><span class="p">.</span><span class="nx">Types</span><span class="p">.</span><span class="kr">int</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">v</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Snix</span><span class="p">.</span><span class="nx">Value</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
  <span class="nx">v</span><span class="p">.</span><span class="nx">convert</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">){</span>
    <span class="k">return</span> <span class="p">(</span><span class="nx">val</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="nx">v</span><span class="p">.</span><span class="nx">fun</span><span class="p">();</span>  
<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-40">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-40">&#182;</a>               </div>               <p><strong>float</strong> - converts the passed value into a float using parseFloat.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">Snix</span><span class="p">.</span><span class="nx">Types</span><span class="p">.</span><span class="kr">float</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">v</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Snix</span><span class="p">.</span><span class="nx">Value</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
  <span class="nx">v</span><span class="p">.</span><span class="nx">convert</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">){</span>
    <span class="k">return</span> <span class="p">(</span><span class="nx">val</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="nx">v</span><span class="p">.</span><span class="nx">fun</span><span class="p">();</span>  
<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-41">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-41">&#182;</a>               </div>               <p><strong>array</strong> - the value will treated as an array. fails if value is not of type array. adds several array specific methods.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">Snix</span><span class="p">.</span><span class="nx">Types</span><span class="p">.</span><span class="nx">array</span>  <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span>
  <span class="nx">value</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="nx">value</span> <span class="o">:</span> <span class="p">[];</span>

  <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">_</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">value</span><span class="p">))</span>
    <span class="k">throw</span> <span class="s2">&quot;not an array&quot;</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">v</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Snix</span><span class="p">.</span><span class="nx">Value</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
  <span class="nx">v</span><span class="p">.</span><span class="nx">convert</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">_</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">val</span><span class="p">))</span>
      <span class="k">throw</span> <span class="s2">&quot;not an array&quot;</span><span class="p">;</span>

    <span class="k">return</span> <span class="nx">val</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">v</span><span class="p">.</span><span class="nx">fun</span><span class="p">();</span></pre></div>             </td>           </tr>                               <tr id="section-42">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-42">&#182;</a>               </div>               <p>Adds the passed entry to the underlying array</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">f</span><span class="p">.</span><span class="nx">add</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">entry</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">arr</span> <span class="o">=</span> <span class="nx">v</span><span class="p">.</span><span class="nx">get</span><span class="p">();</span>
    <span class="nx">arr</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">entry</span><span class="p">);</span>

    <span class="nx">v</span><span class="p">.</span><span class="nx">triggerDependants</span><span class="p">();</span>
  <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-43">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-43">&#182;</a>               </div>               <p>Removes the passed entry from the underlying array</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">f</span><span class="p">.</span><span class="nx">remove</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">entry</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">arr</span> <span class="o">=</span> <span class="nx">v</span><span class="p">.</span><span class="nx">get</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">newArr</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">without</span><span class="p">(</span><span class="nx">arr</span><span class="p">,</span> <span class="nx">entry</span><span class="p">);</span>
    <span class="nx">v</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">newArr</span><span class="p">);</span>
  <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-44">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-44">&#182;</a>               </div>               <p>Returns the size of the underlying array</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">f</span><span class="p">.</span><span class="nx">size</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">return</span> <span class="nx">v</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="nx">length</span><span class="p">;</span>
  <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-45">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-45">&#182;</a>               </div>               <p>Removes all entries from the underlying array</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">f</span><span class="p">.</span><span class="nx">clear</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">v</span><span class="p">.</span><span class="nx">set</span><span class="p">([]);</span>
  <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-46">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-46">&#182;</a>               </div>               <p>Returns true if the array contains no entries, false otherwise</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">f</span><span class="p">.</span><span class="nx">isEmpty</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">return</span> <span class="nx">v</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="nx">f</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">Snix</span><span class="p">.</span><span class="nx">Types</span><span class="p">.</span><span class="nx">compute</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fun</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">opts</span><span class="p">){</span>
  <span class="nx">context</span> <span class="o">=</span> <span class="nx">context</span> <span class="o">||</span> <span class="k">this</span><span class="p">;</span>
  <span class="nx">opts</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">defaults</span><span class="p">(</span><span class="nx">opts</span> <span class="o">||</span> <span class="p">{},</span> <span class="p">{});</span>

  <span class="kd">var</span> <span class="nx">rawValueProvider</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">fun</span><span class="p">,</span> <span class="nx">context</span><span class="p">);</span>

  <span class="kd">var</span> <span class="nx">valueProvider</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">try</span><span class="p">{</span>
      <span class="kd">var</span> <span class="nx">prevCaller</span> <span class="o">=</span> <span class="nx">Snix</span><span class="p">.</span><span class="nx">__caller__</span><span class="p">;</span>
      <span class="nx">Snix</span><span class="p">.</span><span class="nx">__caller__</span> <span class="o">=</span> <span class="nx">v</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">rawValueProvider</span><span class="p">();</span>
    <span class="p">}</span><span class="k">finally</span><span class="p">{</span>
      <span class="nx">Snix</span><span class="p">.</span><span class="nx">__caller__</span> <span class="o">=</span> <span class="nx">prevCaller</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="kd">var</span> <span class="nx">v</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Snix</span><span class="p">.</span><span class="nx">Value</span><span class="p">(</span><span class="nx">valueProvider</span><span class="p">);</span>

  <span class="k">return</span> <span class="nx">v</span><span class="p">.</span><span class="nx">fun</span><span class="p">();</span>
<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-47">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-47">&#182;</a>               </div>               <p><strong>enu</strong> - a value which behaves like enumerated type in languages like java, etc. </p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">Snix</span><span class="p">.</span><span class="nx">Types</span><span class="p">.</span><span class="nx">enu</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">entries</span> <span class="o">=</span> <span class="p">[];</span></pre></div>             </td>           </tr>                               <tr id="section-48">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-48">&#182;</a>               </div>               <p>Loop over all arguments and create an entry (id, name) for each in this enum</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="nx">arguments</span><span class="p">[</span><span class="nx">i</span><span class="p">]};</span>
    <span class="nx">e</span><span class="p">.</span><span class="nx">toString</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="nx">entries</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">){</span></pre></div>             </td>           </tr>                               <tr id="section-49">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-49">&#182;</a>               </div>               <p>Returns all entries in this enum</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">return</span> <span class="nx">entries</span><span class="p">;</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-50">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-50">&#182;</a>               </div>               <p>Find an entry in this enum which name matches the passed argument</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="kd">var</span> <span class="nx">entry</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">where</span><span class="p">(</span><span class="nx">entries</span><span class="p">,</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]})[</span><span class="mi">0</span><span class="p">];</span></pre></div>             </td>           </tr>                               <tr id="section-51">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-51">&#182;</a>               </div>               <p>Fails if no entry is found</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">entry</span><span class="p">)</span>
        <span class="k">throw</span> <span class="s2">&quot;unknown in enumeration: &quot;</span> <span class="o">+</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>

      <span class="k">return</span> <span class="nx">entry</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="nx">f</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">Snix</span><span class="p">.</span><span class="nx">Types</span><span class="p">.</span><span class="nx">remote</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">urlFun</span><span class="p">,</span> <span class="nx">valueFun</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">v</span> <span class="o">=</span> <span class="nx">Snix</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

  <span class="nx">valueFun</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">?</span> <span class="nx">valueFun</span> <span class="o">:</span> <span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span> <span class="k">return</span> <span class="nx">data</span><span class="p">;</span> <span class="p">});</span>

  <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">Snix</span><span class="p">.</span><span class="nx">compute</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="nx">urlFun</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;function&quot;</span> <span class="o">?</span> <span class="nx">urlFun</span><span class="p">()</span> <span class="o">:</span> <span class="nx">urlFun</span><span class="p">);</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span>
      <span class="nx">$</span><span class="p">.</span><span class="nx">getJSON</span><span class="p">(</span><span class="nx">url</span><span class="p">.</span><span class="nx">toString</span><span class="p">()).</span><span class="nx">success</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
        <span class="nx">v</span><span class="p">(</span><span class="nx">valueFun</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
      <span class="p">});</span>

    <span class="k">return</span> <span class="nx">url</span><span class="p">;</span>
  <span class="p">});</span>


  <span class="nx">c</span><span class="p">();</span> <span class="c1">// trigger trackCaller</span>

  <span class="nx">v</span><span class="p">.</span><span class="nx">reload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">c</span><span class="p">.</span><span class="nx">forceEvalValue</span><span class="p">();</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="nx">v</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">Snix</span><span class="p">.</span><span class="nx">Types</span><span class="p">.</span><span class="nx">remoteArray</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">urlFun</span><span class="p">,</span> <span class="nx">valueFun</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">v</span> <span class="o">=</span> <span class="nx">Snix</span><span class="p">.</span><span class="nx">array</span><span class="p">();</span>

  <span class="nx">valueFun</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">?</span> <span class="nx">valueFun</span> <span class="o">:</span> <span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span> <span class="k">return</span> <span class="nx">data</span><span class="p">;</span> <span class="p">});</span>

  <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">Snix</span><span class="p">.</span><span class="nx">compute</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="nx">urlFun</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;function&quot;</span> <span class="o">?</span> <span class="nx">urlFun</span><span class="p">()</span> <span class="o">:</span> <span class="nx">urlFun</span><span class="p">);</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span>
      <span class="nx">$</span><span class="p">.</span><span class="nx">getJSON</span><span class="p">(</span><span class="nx">url</span><span class="p">.</span><span class="nx">toString</span><span class="p">()).</span><span class="nx">success</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
        <span class="nx">v</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">valueFun</span><span class="p">));</span>
      <span class="p">});</span>

    <span class="k">return</span> <span class="nx">url</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="nx">c</span><span class="p">();</span> <span class="c1">// trigger trackCaller</span></pre></div>             </td>           </tr>                               <tr id="section-52">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-52">&#182;</a>               </div>               <p>force a reload</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">v</span><span class="p">.</span><span class="nx">reload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">c</span><span class="p">.</span><span class="nx">forceEvalValue</span><span class="p">();</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="nx">v</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">Snix</span><span class="p">.</span><span class="nx">Types</span><span class="p">.</span><span class="nx">errors</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">v</span> <span class="o">=</span> <span class="nx">Snix</span><span class="p">.</span><span class="nx">val</span><span class="p">({});</span>

  <span class="nx">v</span><span class="p">.</span><span class="nx">clear</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">this</span><span class="p">({});</span>
  <span class="p">};</span>

  <span class="nx">v</span><span class="p">.</span><span class="nx">validate</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">rules</span><span class="p">,</span> <span class="nx">context</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">entries</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">rules</span><span class="p">){</span>
      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">rules</span><span class="p">[</span><span class="nx">key</span><span class="p">].</span><span class="nx">apply</span><span class="p">(</span><span class="nx">context</span><span class="p">))</span>
        <span class="nx">entries</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">(</span><span class="nx">entries</span><span class="p">);</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">isEmpty</span><span class="p">();</span>
  <span class="p">};</span>

  <span class="nx">v</span><span class="p">.</span><span class="nx">isEmpty</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">size</span><span class="p">(</span><span class="k">this</span><span class="p">())</span> <span class="o">==</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="nx">v</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">Snix</span><span class="p">.</span><span class="nx">Types</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fun</span><span class="p">,</span> <span class="nx">key</span><span class="p">){</span>
  <span class="nx">Snix</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">fun</span><span class="p">;</span>
<span class="p">});</span></pre></div>             </td>           </tr>                               <tr id="section-53">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-53">&#182;</a>               </div>               <hr />

<h2>Snix.Binding</h2>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">Snix</span><span class="p">.</span><span class="nx">Binding</span> <span class="o">=</span> <span class="p">{};</span>

<span class="nx">Snix</span><span class="p">.</span><span class="nx">Binding</span><span class="p">.</span><span class="nx">idOf</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">any</span><span class="p">){</span>
  <span class="k">return</span> <span class="p">((</span><span class="k">typeof</span><span class="p">(</span><span class="nx">any</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;string&quot;</span> <span class="o">||</span> <span class="k">typeof</span><span class="p">(</span><span class="nx">any</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;number&quot;</span><span class="p">)</span> <span class="o">?</span> <span class="nx">any</span> <span class="o">:</span> <span class="nx">any</span><span class="p">.</span><span class="nx">id</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span>
<span class="p">};</span>

<span class="nx">Snix</span><span class="p">.</span><span class="nx">Binding</span><span class="p">.</span><span class="nx">parse</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">str</span><span class="p">){</span>
  <span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">str</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">idx</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">key</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">idx</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\s/g</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">val</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">idx</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="nx">s</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^(\s)*/g</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">);</span>

    <span class="k">return</span> <span class="p">[</span><span class="nx">key</span><span class="p">,</span> <span class="nx">val</span><span class="p">];</span>
  <span class="p">});</span>
<span class="p">};</span>

<span class="nx">Snix</span><span class="p">.</span><span class="nx">Binding</span><span class="p">.</span><span class="nx">accessor</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">expr</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">vars</span><span class="p">){</span>
  <span class="nx">expr</span> <span class="o">=</span> <span class="nx">expr</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/@/g</span><span class="p">,</span> <span class="s2">&quot;this.&quot;</span><span class="p">);</span>
  <span class="k">return</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">try</span><span class="p">{</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>   <span class="k">return</span> <span class="k">new</span> <span class="nb">Function</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">vars</span><span class="p">),</span> <span class="s2">&quot;return &quot;</span> <span class="o">+</span> <span class="nx">expr</span><span class="p">).</span><span class="nx">apply</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">_</span><span class="p">.</span><span class="nx">values</span><span class="p">(</span><span class="nx">vars</span><span class="p">));</span>
      <span class="k">else</span>                        <span class="k">return</span> <span class="k">new</span> <span class="nb">Function</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">vars</span><span class="p">).</span><span class="nx">concat</span><span class="p">([</span><span class="s2">&quot;value&quot;</span><span class="p">]),</span> <span class="nx">expr</span> <span class="o">+</span> <span class="s2">&quot;(value);&quot;</span><span class="p">).</span><span class="nx">apply</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">_</span><span class="p">.</span><span class="nx">values</span><span class="p">(</span><span class="nx">vars</span><span class="p">).</span><span class="nx">concat</span><span class="p">([</span><span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]]));</span>
    <span class="p">}</span><span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
      <span class="k">if</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">console</span><span class="p">)</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">expr</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">vars</span><span class="p">);</span>
      <span class="k">throw</span> <span class="s2">&quot;expr: &quot;</span> <span class="o">+</span> <span class="nx">expr</span> <span class="o">+</span> <span class="s2">&quot;, err: &quot;</span> <span class="o">+</span> <span class="nx">e</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">};</span>

<span class="nx">Snix</span><span class="p">.</span><span class="nx">Binding</span><span class="p">.</span><span class="nx">binden</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">el</span><span class="p">,</span> <span class="nx">vars</span><span class="p">){</span>
  <span class="nx">vars</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="o">?</span> <span class="nx">vars</span> <span class="o">:</span> <span class="p">{};</span>

  <span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">).</span><span class="nx">toArray</span><span class="p">(),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">bindingAttr</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;data-bind&quot;</span><span class="p">);</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">bindingAttr</span><span class="p">){</span>
      <span class="kd">var</span> <span class="nx">bindingsArr</span> <span class="o">=</span> <span class="nx">Snix</span><span class="p">.</span><span class="nx">Binding</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">bindingAttr</span><span class="p">);</span>
      <span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">bindingsArr</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">arr</span><span class="p">){</span>
        <span class="kd">var</span> <span class="nx">bindingName</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">bindingExpr</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>

        <span class="kd">var</span> <span class="nx">acc</span> <span class="o">=</span> <span class="nx">Snix</span><span class="p">.</span><span class="nx">Binding</span><span class="p">.</span><span class="nx">accessor</span><span class="p">(</span><span class="nx">bindingExpr</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">vars</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">binding</span> <span class="o">=</span> <span class="nx">Snix</span><span class="p">.</span><span class="nx">Bindings</span><span class="p">[</span><span class="nx">bindingName</span><span class="p">];</span>

        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">binding</span><span class="p">)</span>
          <span class="k">throw</span> <span class="s2">&quot;unknown binding: &quot;</span> <span class="o">+</span> <span class="nx">bindingName</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">bindingContext</span> <span class="o">=</span> <span class="p">{</span><span class="nx">context</span><span class="o">:</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">vars</span><span class="o">:</span> <span class="nx">vars</span><span class="p">};</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">binding</span><span class="p">.</span><span class="nx">init</span><span class="p">)</span>
          <span class="nx">binding</span><span class="p">.</span><span class="nx">init</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">bindingContext</span><span class="p">,</span> <span class="p">[</span><span class="nx">el</span><span class="p">,</span> <span class="nx">acc</span><span class="p">]);</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">binding</span><span class="p">.</span><span class="nx">update</span><span class="p">){</span>
          <span class="kd">var</span> <span class="nx">compute</span> <span class="o">=</span> <span class="nx">Snix</span><span class="p">.</span><span class="nx">compute</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span></pre></div>             </td>           </tr>                               <tr id="section-54">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-54">&#182;</a>               </div>               <p>console.info("updating: ", bindingName, bindingExpr);</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="nx">binding</span><span class="p">.</span><span class="nx">update</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">bindingContext</span><span class="p">,</span> <span class="p">[</span><span class="nx">el</span><span class="p">,</span> <span class="nx">acc</span><span class="p">]);</span>
            <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
          <span class="p">},</span> <span class="k">this</span><span class="p">);</span>

          <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;destroyed&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
            <span class="nx">compute</span><span class="p">.</span><span class="nx">dispose</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
          <span class="p">});</span></pre></div>             </td>           </tr>                               <tr id="section-55">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-55">&#182;</a>               </div>               <p>var start = new Date().getTime();</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="nx">compute</span><span class="p">();</span></pre></div>             </td>           </tr>                               <tr id="section-56">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-56">&#182;</a>               </div>               <p>var end = new Date().getTime();</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-57">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-57">&#182;</a>               </div>               <p>console.info(bindingName + "," + bindingExpr + " --- " + (end - start));</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="p">}</span>
      <span class="p">});</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">).</span><span class="nx">children</span><span class="p">().</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
        <span class="nx">Snix</span><span class="p">.</span><span class="nx">Binding</span><span class="p">.</span><span class="nx">binden</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="nx">vars</span><span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-58">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-58">&#182;</a>               </div>               <hr />

<h2>Snix.Bindings</h2>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">Snix</span><span class="p">.</span><span class="nx">Bindings</span> <span class="o">=</span> <span class="p">{};</span>

<span class="nx">Snix</span><span class="p">.</span><span class="nx">Bindings</span><span class="p">[</span><span class="s2">&quot;check&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">init</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">accessor</span><span class="p">){</span>
    <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;change&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="nx">accessor</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">).</span><span class="nx">is</span><span class="p">(</span><span class="s2">&quot;:checked&quot;</span><span class="p">));</span>
    <span class="p">});</span>
  <span class="p">},</span>
  <span class="nx">update</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">accessor</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">Snix</span><span class="p">.</span><span class="nx">unwrap</span><span class="p">(</span><span class="nx">accessor</span><span class="p">()))</span>   <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;checked&quot;</span><span class="p">,</span> <span class="s2">&quot;checked&quot;</span><span class="p">);</span>
    <span class="k">else</span>                          <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">).</span><span class="nx">removeAttr</span><span class="p">(</span><span class="s2">&quot;checked&quot;</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">Snix</span><span class="p">.</span><span class="nx">Bindings</span><span class="p">[</span><span class="s2">&quot;click&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">init</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">accessor</span><span class="p">){</span>
    <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
      <span class="nx">accessor</span><span class="p">();</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">Snix</span><span class="p">.</span><span class="nx">Bindings</span><span class="p">[</span><span class="s2">&quot;css&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">update</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">accessor</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">opts</span> <span class="o">=</span> <span class="nx">Snix</span><span class="p">.</span><span class="nx">unwrap</span><span class="p">(</span><span class="nx">accessor</span><span class="p">());</span>

    <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">opts</span><span class="p">){</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">opts</span><span class="p">[</span><span class="nx">key</span><span class="p">])</span> <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
      <span class="k">else</span>          <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">Snix</span><span class="p">.</span><span class="nx">Bindings</span><span class="p">[</span><span class="s2">&quot;date&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">init</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">accessor</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">opts</span> <span class="o">=</span> <span class="nx">Snix</span><span class="p">.</span><span class="nx">unwrap</span><span class="p">(</span><span class="nx">accessor</span><span class="p">());</span>
    <span class="nx">opts</span><span class="p">.</span><span class="nx">caption</span> <span class="o">=</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">caption</span> <span class="o">||</span> <span class="p">{</span><span class="nx">year</span><span class="o">:</span> <span class="s2">&quot;Year&quot;</span><span class="p">,</span> <span class="nx">month</span><span class="o">:</span> <span class="s2">&quot;Month&quot;</span><span class="p">,</span> <span class="nx">day</span><span class="o">:</span> <span class="s2">&quot;Day&quot;</span><span class="p">};</span>

    <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">).</span><span class="nx">empty</span><span class="p">();</span>

    <span class="kd">var</span> <span class="nx">now</span> <span class="o">=</span> <span class="nx">moment</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">entries</span> <span class="o">=</span> <span class="p">[[</span><span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="nx">now</span><span class="p">.</span><span class="nx">year</span><span class="p">()</span> <span class="o">-</span> <span class="mi">80</span><span class="p">,</span> <span class="nx">now</span><span class="p">.</span><span class="nx">year</span><span class="p">()</span> <span class="o">+</span> <span class="mi">10</span><span class="p">,</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">caption</span><span class="p">.</span><span class="nx">year</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;month&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">caption</span><span class="p">.</span><span class="nx">month</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;day&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">caption</span><span class="p">.</span><span class="nx">day</span><span class="p">]];</span>

    <span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">entries</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">entry</span><span class="p">){</span>
      <span class="kd">var</span> <span class="nx">select</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;&lt;select class=&#39;&quot;</span><span class="o">+</span><span class="nx">entry</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;&#39;&gt;&lt;/select&gt;&quot;</span><span class="p">);</span>
      <span class="nx">select</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;&lt;option value=&#39;-1&#39;&gt;&quot;</span><span class="o">+</span><span class="nx">entry</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;&lt;/option&gt;&quot;</span><span class="p">);</span>

      <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="nx">entry</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span> <span class="nx">i</span><span class="o">&lt;=</span><span class="nx">entry</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>
        <span class="kd">var</span> <span class="nx">label</span> <span class="o">=</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">)</span> <span class="o">?</span> <span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="o">+</span><span class="nx">i</span><span class="p">)</span> <span class="o">:</span> <span class="nx">i</span><span class="p">;</span>
        <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;&lt;option value=&quot;</span><span class="o">+</span><span class="nx">i</span><span class="o">+</span><span class="s2">&quot;&gt;&quot;</span><span class="o">+</span><span class="nx">label</span><span class="o">+</span><span class="s2">&quot;&lt;/option&gt;&quot;</span><span class="p">).</span><span class="nx">appendTo</span><span class="p">(</span><span class="nx">select</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="nx">select</span><span class="p">.</span><span class="nx">appendTo</span><span class="p">(</span><span class="nx">el</span><span class="p">);</span>

      <span class="nx">$</span><span class="p">(</span><span class="nx">select</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;change&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>

        <span class="kd">var</span> <span class="nx">year</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;select.year option:selected&quot;</span><span class="p">,</span> <span class="nx">el</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span> <span class="mi">10</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">month</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;select.month option:selected&quot;</span><span class="p">,</span> <span class="nx">el</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span> <span class="mi">10</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">day</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;select.day option:selected&quot;</span><span class="p">,</span> <span class="nx">el</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span> <span class="mi">10</span><span class="p">);</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">year</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">month</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">day</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">){</span>
          <span class="nx">opts</span><span class="p">.</span><span class="nx">moment</span><span class="p">(</span><span class="nx">moment</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">year</span><span class="p">,</span> <span class="nx">month</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">day</span><span class="p">)).</span><span class="nx">startOf</span><span class="p">(</span><span class="s1">&#39;day&#39;</span><span class="p">));</span>
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">Snix</span><span class="p">.</span><span class="nx">unwrap</span><span class="p">(</span><span class="nx">opts</span><span class="p">.</span><span class="nx">moment</span><span class="p">)){</span>
            <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;select option[value=&#39;-1&#39;]&quot;</span><span class="p">,</span> <span class="nx">el</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;selected&quot;</span><span class="p">,</span> <span class="s2">&quot;selected&quot;</span><span class="p">);</span>
            <span class="nx">opts</span><span class="p">.</span><span class="nx">moment</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

      <span class="p">});</span>
    <span class="p">});</span>
  <span class="p">},</span>
  <span class="nx">update</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">accessor</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">opts</span> <span class="o">=</span> <span class="nx">Snix</span><span class="p">.</span><span class="nx">unwrap</span><span class="p">(</span><span class="nx">accessor</span><span class="p">());</span>
    <span class="kd">var</span> <span class="nx">mom</span> <span class="o">=</span> <span class="nx">Snix</span><span class="p">.</span><span class="nx">unwrap</span><span class="p">(</span><span class="nx">opts</span><span class="p">.</span><span class="nx">moment</span><span class="p">);</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">mom</span><span class="p">){</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;select.year option[value=&#39;&quot;</span><span class="o">+</span><span class="nx">mom</span><span class="p">.</span><span class="nx">year</span><span class="p">()</span><span class="o">+</span><span class="s2">&quot;&#39;]&quot;</span><span class="p">,</span> <span class="nx">el</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;selected&quot;</span><span class="p">,</span> <span class="s2">&quot;selected&quot;</span><span class="p">);</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;select.month option[value=&#39;&quot;</span><span class="o">+</span><span class="p">(</span><span class="nx">mom</span><span class="p">.</span><span class="nx">month</span><span class="p">()</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;&#39;]&quot;</span><span class="p">,</span> <span class="nx">el</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;selected&quot;</span><span class="p">,</span> <span class="s2">&quot;selected&quot;</span><span class="p">);</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;select.day option[value=&#39;&quot;</span><span class="o">+</span><span class="nx">mom</span><span class="p">.</span><span class="nx">date</span><span class="p">()</span><span class="o">+</span><span class="s2">&quot;&#39;]&quot;</span><span class="p">,</span> <span class="nx">el</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;selected&quot;</span><span class="p">,</span> <span class="s2">&quot;selected&quot;</span><span class="p">);</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;select option[value=&#39;-1&#39;]&quot;</span><span class="p">,</span> <span class="nx">el</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;selected&quot;</span><span class="p">,</span> <span class="s2">&quot;selected&quot;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">Snix</span><span class="p">.</span><span class="nx">Bindings</span><span class="p">[</span><span class="s2">&quot;log&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">update</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">accessor</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">console</span><span class="p">)</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Snix</span><span class="p">.</span><span class="nx">unwrap</span><span class="p">(</span><span class="nx">accessor</span><span class="p">()));</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">Snix</span><span class="p">.</span><span class="nx">Bindings</span><span class="p">[</span><span class="s2">&quot;loop&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">init</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">accessor</span><span class="p">){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">tpl</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">).</span><span class="nx">html</span><span class="p">();</span>
    <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">).</span><span class="nx">empty</span><span class="p">();</span>
  <span class="p">},</span>
  <span class="nx">update</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">accessor</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">opts</span> <span class="o">=</span> <span class="nx">accessor</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">entries</span> <span class="o">=</span> <span class="nx">Snix</span><span class="p">.</span><span class="nx">unwrap</span><span class="p">(</span><span class="nx">opts</span><span class="p">.</span><span class="nx">entries</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">ids</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">entries</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span> 
      <span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="nx">Snix</span><span class="p">.</span><span class="nx">Binding</span><span class="p">.</span><span class="nx">idOf</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>

      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">id</span><span class="p">)</span>
        <span class="k">throw</span> <span class="s2">&quot;loop expects an id attribute for each entry&quot;</span><span class="p">;</span>

      <span class="k">return</span> <span class="nx">id</span><span class="p">;</span>
    <span class="p">});</span>
    <span class="kd">var</span> <span class="nx">elIds</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;&gt; [data-id]&quot;</span><span class="p">,</span> <span class="nx">el</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span> <span class="k">return</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;data-id&quot;</span><span class="p">);</span> <span class="p">}).</span><span class="nx">toArray</span><span class="p">();</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">ids</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="nx">elIds</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">ids</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span> <span class="o">!=</span> <span class="nx">elIds</span><span class="p">.</span><span class="nx">toString</span><span class="p">()){</span></pre></div>             </td>           </tr>                               <tr id="section-59">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-59">&#182;</a>               </div>               <p>same element but different sorting</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">).</span><span class="nx">empty</span><span class="p">();</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-60">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-60">&#182;</a>               </div>               <p>TODO: $(el).empty(); does not refresh elIds - optimize</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span><span class="p">(</span><span class="nx">elIds</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">){</span></pre></div>             </td>           </tr>                               <tr id="section-61">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-61">&#182;</a>               </div>               <p>remove dom elements bound to object which no longer exist</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="kd">var</span> <span class="nx">removeSelector</span> <span class="o">=</span> <span class="nx">_</span><span class="p">(</span><span class="nx">elIds</span><span class="p">).</span><span class="nx">chain</span><span class="p">().</span><span class="nx">difference</span><span class="p">(</span><span class="nx">ids</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span> <span class="k">return</span> <span class="s2">&quot;[data-id=&#39;&quot;</span><span class="o">+</span><span class="nx">e</span><span class="o">+</span><span class="s2">&quot;&#39;]&quot;</span><span class="p">;</span> <span class="p">}).</span><span class="nx">value</span><span class="p">().</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">);</span>
      <span class="nx">$</span><span class="p">(</span><span class="nx">removeSelector</span><span class="p">,</span> <span class="nx">el</span><span class="p">).</span><span class="nx">remove</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">ids</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">id</span><span class="p">){</span>
      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">_</span><span class="p">.</span><span class="nx">include</span><span class="p">(</span><span class="nx">elIds</span><span class="p">,</span> <span class="nx">id</span><span class="p">)){</span></pre></div>             </td>           </tr>                               <tr id="section-62">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-62">&#182;</a>               </div>               <p>create dom elements</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">entry</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">detect</span><span class="p">(</span><span class="nx">entries</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span> <span class="k">return</span> <span class="nx">Snix</span><span class="p">.</span><span class="nx">Binding</span><span class="p">.</span><span class="nx">idOf</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">==</span> <span class="nx">id</span><span class="p">;</span> <span class="p">});</span>

        <span class="kd">var</span> <span class="nx">child</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">tpl</span><span class="p">);</span>
        <span class="nx">child</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;data-id&quot;</span><span class="p">,</span> <span class="nx">id</span><span class="p">);</span>
        <span class="nx">child</span><span class="p">.</span><span class="nx">appendTo</span><span class="p">(</span><span class="nx">el</span><span class="p">);</span>

        <span class="kd">var</span> <span class="nx">newVars</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">defaults</span><span class="p">({},</span> <span class="k">this</span><span class="p">.</span><span class="nx">vars</span><span class="p">);</span>
        <span class="nx">newVars</span><span class="p">[</span><span class="nx">opts</span><span class="p">.</span><span class="nx">as</span><span class="p">]</span> <span class="o">=</span> <span class="nx">entry</span><span class="p">;</span>

        <span class="nx">Snix</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
          <span class="nx">Snix</span><span class="p">.</span><span class="nx">Binding</span><span class="p">.</span><span class="nx">binden</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">,</span> <span class="nx">child</span><span class="p">,</span> <span class="nx">newVars</span><span class="p">);</span>
        <span class="p">},</span> <span class="kc">null</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
      <span class="p">}</span>

    <span class="p">},</span> <span class="k">this</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">Snix</span><span class="p">.</span><span class="nx">Bindings</span><span class="p">[</span><span class="s2">&quot;radio&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">init</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">accessor</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">opts</span> <span class="o">=</span> <span class="nx">accessor</span><span class="p">();</span>

    <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;change&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="kd">var</span> <span class="nx">selectedId</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;data-id&quot;</span><span class="p">);</span>
      <span class="nx">opts</span><span class="p">.</span><span class="nx">selected</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">detect</span><span class="p">(</span><span class="nx">Snix</span><span class="p">.</span><span class="nx">unwrap</span><span class="p">(</span><span class="nx">opts</span><span class="p">.</span><span class="nx">entries</span><span class="p">),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span> <span class="k">return</span> <span class="nx">Snix</span><span class="p">.</span><span class="nx">Binding</span><span class="p">.</span><span class="nx">idOf</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">==</span> <span class="nx">selectedId</span><span class="p">;</span> <span class="p">}));</span>
    <span class="p">});</span>

    <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;data-id&quot;</span><span class="p">,</span> <span class="nx">Snix</span><span class="p">.</span><span class="nx">Binding</span><span class="p">.</span><span class="nx">idOf</span><span class="p">(</span><span class="nx">opts</span><span class="p">.</span><span class="nx">entry</span><span class="p">));</span>
  <span class="p">},</span>
  <span class="nx">update</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">accessor</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">opts</span> <span class="o">=</span> <span class="nx">accessor</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">selected</span> <span class="o">=</span> <span class="nx">Snix</span><span class="p">.</span><span class="nx">unwrap</span><span class="p">(</span><span class="nx">opts</span><span class="p">.</span><span class="nx">selected</span><span class="p">);</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">selected</span><span class="p">){</span>
      <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">).</span><span class="nx">parents</span><span class="p">(</span><span class="s2">&quot;form&quot;</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;input[name=&#39;&quot;</span><span class="o">+</span><span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;&#39;][data-id=&#39;&quot;</span><span class="o">+</span><span class="nx">Snix</span><span class="p">.</span><span class="nx">Binding</span><span class="p">.</span><span class="nx">idOf</span><span class="p">(</span><span class="nx">selected</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;&#39;]&quot;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;checked&quot;</span><span class="p">,</span> <span class="s2">&quot;checked&quot;</span><span class="p">);</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">).</span><span class="nx">parents</span><span class="p">(</span><span class="s2">&quot;form&quot;</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;input[name=&#39;&quot;</span><span class="o">+</span><span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;&#39;]&quot;</span><span class="p">).</span><span class="nx">removeAttr</span><span class="p">(</span><span class="s2">&quot;checked&quot;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-63">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-63">&#182;</a>               </div>               <h2>Select</h2>

<p>The Select-binding manages the select element, creates the appropriate option elements for the data model, an empty "please choose" option which is selected by default and when the user chooses an option, this will be set in the data model.</p>

<h3>Example</h3>

<p>var app = {<br/>
todos: Snix.array([<br/>
&nbsp;&nbsp;{id: 1, name: 'todo1'},<br/>
&nbsp;&nbsp;{id: 2, name: 'todo2'},<br/>
&nbsp;&nbsp;{id: 3, name: 'todo3'}<br/>
]),<br/>
selectedTodo: Snix.val(null)<br/>
};</p>

<p>&lt;select data-bind="select: {entries: @todos, label: 'name', caption: 'Please choose a todo', selected: @selectedTodo}"&gt;&lt;/select&gt;</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">Snix</span><span class="p">.</span><span class="nx">Bindings</span><span class="p">[</span><span class="s2">&quot;select&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">init</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">accessor</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">opts</span> <span class="o">=</span> <span class="nx">accessor</span><span class="p">();</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">opts</span><span class="p">.</span><span class="nx">multiple</span><span class="p">)</span>
      <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;multiple&quot;</span><span class="p">,</span> <span class="s2">&quot;multiple&quot;</span><span class="p">);</span>

    <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;change&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="kd">var</span> <span class="nx">selectedIds</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;option:selected&quot;</span><span class="p">,</span> <span class="nx">el</span><span class="p">).</span><span class="nx">toArray</span><span class="p">(),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span> <span class="k">return</span> <span class="nx">$</span><span class="p">(</span><span class="nx">e</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">);</span> <span class="p">});</span>

      <span class="k">if</span><span class="p">(</span><span class="nx">opts</span><span class="p">.</span><span class="nx">multiple</span><span class="p">){</span>
        <span class="kd">var</span> <span class="nx">selectedIds</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;option:selected&quot;</span><span class="p">,</span> <span class="nx">el</span><span class="p">).</span><span class="nx">toArray</span><span class="p">(),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span> <span class="k">return</span> <span class="nx">$</span><span class="p">(</span><span class="nx">e</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">);</span> <span class="p">});</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">selectedIds</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>   <span class="nx">opts</span><span class="p">.</span><span class="nx">selected</span><span class="p">([]);</span>
        <span class="k">else</span>                          <span class="nx">opts</span><span class="p">.</span><span class="nx">selected</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="nx">Snix</span><span class="p">.</span><span class="nx">unwrap</span><span class="p">(</span><span class="nx">opts</span><span class="p">.</span><span class="nx">entries</span><span class="p">),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span> <span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">include</span><span class="p">(</span><span class="nx">selectedIds</span><span class="p">,</span> <span class="nx">Snix</span><span class="p">.</span><span class="nx">Binding</span><span class="p">.</span><span class="nx">idOf</span><span class="p">(</span><span class="nx">e</span><span class="p">));</span> <span class="p">}));</span>
      <span class="p">}</span><span class="k">else</span><span class="p">{</span>
        <span class="kd">var</span> <span class="nx">selectedId</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;option:selected&quot;</span><span class="p">,</span> <span class="nx">el</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">);</span>
        
        <span class="k">if</span><span class="p">(</span><span class="nx">selectedId</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>    <span class="nx">opts</span><span class="p">.</span><span class="nx">selected</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
        <span class="k">else</span>                    <span class="nx">opts</span><span class="p">.</span><span class="nx">selected</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">detect</span><span class="p">(</span><span class="nx">Snix</span><span class="p">.</span><span class="nx">unwrap</span><span class="p">(</span><span class="nx">opts</span><span class="p">.</span><span class="nx">entries</span><span class="p">),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span> <span class="k">return</span> <span class="nx">Snix</span><span class="p">.</span><span class="nx">Binding</span><span class="p">.</span><span class="nx">idOf</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">==</span> <span class="nx">selectedId</span><span class="p">;</span> <span class="p">}));</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">},</span>
  <span class="nx">update</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">accessor</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">opts</span> <span class="o">=</span> <span class="nx">accessor</span><span class="p">();</span>
    <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">).</span><span class="nx">empty</span><span class="p">();</span>

    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">opts</span><span class="p">.</span><span class="nx">multiple</span><span class="p">){</span>
      <span class="kd">var</span> <span class="nx">caption</span> <span class="o">=</span> <span class="nx">Snix</span><span class="p">.</span><span class="nx">unwrap</span><span class="p">(</span><span class="nx">opts</span><span class="p">.</span><span class="nx">caption</span><span class="p">)</span> <span class="o">||</span> <span class="s2">&quot;Please Choose&quot;</span><span class="p">;</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;&lt;option value=&#39;-1&#39;&gt;&quot;</span><span class="o">+</span><span class="nx">caption</span><span class="o">+</span><span class="s2">&quot;&lt;/option&gt;&quot;</span><span class="p">).</span><span class="nx">appendTo</span><span class="p">(</span><span class="nx">el</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">labelKey</span> <span class="o">=</span> <span class="nx">Snix</span><span class="p">.</span><span class="nx">unwrap</span><span class="p">(</span><span class="nx">opts</span><span class="p">.</span><span class="nx">label</span><span class="p">);</span>

    <span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">Snix</span><span class="p">.</span><span class="nx">unwrap</span><span class="p">(</span><span class="nx">opts</span><span class="p">.</span><span class="nx">entries</span><span class="p">),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
      <span class="kd">var</span> <span class="nx">label</span> <span class="o">=</span> <span class="p">(</span><span class="nx">labelKey</span> <span class="o">?</span> <span class="nx">Snix</span><span class="p">.</span><span class="nx">unwrap</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="nx">labelKey</span><span class="p">])</span> <span class="o">:</span> <span class="nx">e</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;&lt;option value=&#39;&quot;</span><span class="o">+</span><span class="nx">Snix</span><span class="p">.</span><span class="nx">Binding</span><span class="p">.</span><span class="nx">idOf</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;&#39;&gt;&quot;</span><span class="o">+</span><span class="nx">label</span><span class="o">+</span><span class="s2">&quot;&lt;/option&gt;&quot;</span><span class="p">).</span><span class="nx">appendTo</span><span class="p">(</span><span class="nx">el</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="kd">var</span> <span class="nx">selected</span> <span class="o">=</span> <span class="nx">Snix</span><span class="p">.</span><span class="nx">unwrap</span><span class="p">(</span><span class="nx">opts</span><span class="p">.</span><span class="nx">selected</span><span class="p">);</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">opts</span><span class="p">.</span><span class="nx">multiple</span><span class="p">){</span> <span class="c1">// array</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">selected</span><span class="p">)</span> 
        <span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">selected</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
          <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;option[value=&#39;&quot;</span><span class="o">+</span><span class="nx">Snix</span><span class="p">.</span><span class="nx">Binding</span><span class="p">.</span><span class="nx">idOf</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;&#39;]&quot;</span><span class="p">,</span> <span class="nx">el</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;selected&quot;</span><span class="p">,</span> <span class="s2">&quot;selected&quot;</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span> <span class="c1">// object</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">selected</span><span class="p">)</span>  <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;option[value=&#39;&quot;</span><span class="o">+</span><span class="nx">Snix</span><span class="p">.</span><span class="nx">Binding</span><span class="p">.</span><span class="nx">idOf</span><span class="p">(</span><span class="nx">selected</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;&#39;]&quot;</span><span class="p">,</span> <span class="nx">el</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;selected&quot;</span><span class="p">,</span> <span class="s2">&quot;selected&quot;</span><span class="p">);</span>
      <span class="k">else</span>          <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;option[value=&#39;-1&#39;]&quot;</span><span class="p">,</span> <span class="nx">el</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;selected&quot;</span><span class="p">,</span> <span class="s2">&quot;selected&quot;</span><span class="p">);</span>
    <span class="p">}</span>

  <span class="p">}</span>
<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-64">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-64">&#182;</a>               </div>               <h2>Text</h2>

<p>The Text-binding sets the text attribute of the element to the underlying value of the data model.</p>

<h3>Example</h3>

<p>var app = {name: Snix.val("joe")};</p>

<p>&lt;span data-bind="text: @name"&gt;&lt;/span&gt;</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">Snix</span><span class="p">.</span><span class="nx">Bindings</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">update</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">accessor</span><span class="p">){</span>
    <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">Snix</span><span class="p">.</span><span class="nx">unwrap</span><span class="p">(</span><span class="nx">accessor</span><span class="p">()));</span>
  <span class="p">}</span>
<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-65">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-65">&#182;</a>               </div>               <h2>Toggle</h2>

<p>The Toggle-binding will toggle the element. Shows it if the value in data model is truthy, hides it otherwise. On hide the children of the element will be removed and recreated on show.</p>

<h3>Example</h3>

<p>var app = {complete: Snix.boolean(true)};</p>

<p>&lt;div data-bind="toggle: @complete() == true"&gt;&lt;span&gt;hello from snix&lt;/span&gt;&lt;/div&gt;</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">Snix</span><span class="p">.</span><span class="nx">Bindings</span><span class="p">[</span><span class="s2">&quot;toggle&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">init</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">accessor</span><span class="p">){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">tpl</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">).</span><span class="nx">html</span><span class="p">();</span>
  <span class="p">},</span>
  <span class="nx">update</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">accessor</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">Snix</span><span class="p">.</span><span class="nx">unwrap</span><span class="p">(</span><span class="nx">accessor</span><span class="p">())){</span>
      <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">).</span><span class="nx">empty</span><span class="p">().</span><span class="nx">show</span><span class="p">();</span>

      <span class="kd">var</span> <span class="nx">child</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">tpl</span><span class="p">);</span>
      <span class="nx">child</span><span class="p">.</span><span class="nx">appendTo</span><span class="p">(</span><span class="nx">el</span><span class="p">);</span>

      <span class="kd">var</span> <span class="nx">newVars</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">defaults</span><span class="p">({},</span> <span class="k">this</span><span class="p">.</span><span class="nx">vars</span><span class="p">);</span>

      <span class="nx">Snix</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
        <span class="nx">Snix</span><span class="p">.</span><span class="nx">Binding</span><span class="p">.</span><span class="nx">binden</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">,</span> <span class="nx">child</span><span class="p">,</span> <span class="nx">newVars</span><span class="p">);</span>
      <span class="p">},</span> <span class="kc">null</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">).</span><span class="nx">hide</span><span class="p">().</span><span class="nx">empty</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-66">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-66">&#182;</a>               </div>               <h2>Value</h2>

<p>The Value-binding sets the value attribute of the element to the underlying value of the data model. Changing the elements value will update the data model as well.</p>

<h3>Example</h3>

<p>var app = {name: Snix.val("joe")};</p>

<p>&lt;input type="text" data-bind="value: @name"/&gt;</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">Snix</span><span class="p">.</span><span class="nx">Bindings</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">init</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">accessor</span><span class="p">){</span>
    <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;change&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="nx">accessor</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">val</span><span class="p">());</span>
    <span class="p">});</span>
  <span class="p">},</span>
  <span class="nx">update</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">accessor</span><span class="p">){</span>
    <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">Snix</span><span class="p">.</span><span class="nx">unwrap</span><span class="p">(</span><span class="nx">accessor</span><span class="p">()));</span>
  <span class="p">}</span>
<span class="p">};</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 